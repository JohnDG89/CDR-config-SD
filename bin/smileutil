#!/bin/bash

# ----------------------------------------------------------------------------
# CDR CLI Tool
#

# Figure out where CDR's home is
pushd `dirname $0`/.. > /dev/null
CDRDIR=`pwd`
popd > /dev/null

# TODO: fail if the CDRDIR directory contains spaces

# Change the working directory to the CDR home directory
cd $CDRDIR

JAVA_OPTS="$JAVA_OPTS -Djava.security.egd=file:/dev/./urandom"

# Build the classpath
CLASSPATH=$CDRDIR/classes
for i in `ls $CDRDIR/lib/*.jar`
do
  CLASSPATH=${CLASSPATH}:${i}
done

COLUMNS=$(tput cols)

java -Dcolumns=$COLUMNS $JAVA_OPTS -cp $CLASSPATH ca.cdr.cli.App "$@"
