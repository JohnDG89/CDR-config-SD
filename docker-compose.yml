version: "3.8"
services:
  smilecdr:
    container_name: smilecdr_local
    image: smilecdr_local
    build: .
    ports:
      - "8000:8000"
      - "9000:9000"
      - "9100:9100"
      - "8001:8001"
      - "9200:9200"
      - "9201:9201"
    environment:
      - DB_URL_MGR=jdbc:postgresql://host.docker.internal:5433/cdr?currentSchema=manager
      - DB_URL_FHIR=jdbc:postgresql://host.docker.internal:5433/cdr?currentSchema=relational
      - DB_USER=cdr
      - DB_PASS=SmileCDR
    volumes:
      - db:/home/smile/smilecdr/database
      - log:/home/smile/smilecdr/log
      - mq:/home/smile/smilecdr/activemq-data
    restart: "unless-stopped"
volumes:
  db:
  log:
  mq: